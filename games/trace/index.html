<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Number Tracing Game</title>
    <link rel="stylesheet" href="styles/tracemain.css">
</head>
<body>
    <!-- Back button -->
    <a href="../index.html" class="back-button">
        <i class="fas fa-arrow-left"></i>
        Back to Games
    </a>

    <!-- Main game area -->
    <div class="game-area">
        <!-- Tracing container -->
        <div class="trace-container" id="trace-container">
            <!-- SVG will be inserted here by the renderer -->
        </div>
        
        <!-- Number word display -->
        <div class="number-word-container">
            <div class="number-word" id="number-word"></div>
        </div>
    </div>

    <!-- Rainbow container -->
    <div class="rainbow-container" id="rainbowContainer">
        <!-- Rainbow will insert arcs here -->
    </div>

    <!-- Grass band -->
    <div class="grass-band"></div>

    <!-- Game completion modal -->
    <div class="modal hidden" id="completion-modal">
        <div class="modal-content">
            <h2>ðŸŽ‰ Fantastic!</h2>
            <p>You've completed all the numbers!</p>
            <button class="play-again-btn" id="play-again-btn">
                <i class="fas fa-redo"></i>
                Play Again
            </button>
        </div>
    </div>

    <!-- Font Awesome for icons -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js"></script>
    
    <!-- Load configuration and dependencies -->
    <script src="js/traceconfig.js"></script>
    <script src="../../js/shared/rainbow.js"></script>
    <script src="../../js/shared/Bear.js"></script>

    <!-- TEMPORARY DEBUG - Check if CONFIG is working -->
    <script>
        console.log('CONFIG loaded:', typeof CONFIG);
        console.log('NUMBER_PATHS available:', CONFIG?.NUMBER_PATHS ? 'YES' : 'NO');
        if (CONFIG?.NUMBER_PATHS) {
            console.log('Available numbers:', Object.keys(CONFIG.NUMBER_PATHS));
        }
    </script>

    <!-- Load game classes -->
    <script src="js/tracenumberrenderer.js"></script>
    <script src="js/tracepathmanager.js"></script>
    <script src="js/balloongame.js"></script>
    <script src="js/tracegamecontroller.js"></script>

    <!-- Initialize game -->
    <script>
        // Start the game with error handling for rainbow
        try {
            const gameController = new TraceGameController();
            
            // Try to initialize, but handle rainbow errors gracefully
            gameController.initializeGame().catch(error => {
                console.warn('Rainbow initialization failed, continuing without rainbow:', error);
                // Continue game initialization without rainbow
                console.log('Game running in paint-only mode');
            });
        } catch (error) {
            console.error('Game controller creation failed:', error);
        }
    </script>
</body>
</html>
